import * as Localization from 'expo-localization';

export type AppLanguage = 'uk' | 'en' | 'de' | 'es';

// з системних локалей беремо мову для стартового UI мови. дефолт англ 
const getDeviceLanguage = (): AppLanguage => {
  const code = Localization.getLocales()?.[0]?.languageCode?.toLowerCase();
  if (code === 'uk') return 'uk';
  if (code === 'de') return 'de';
  if (code === 'en') return 'en';
  if (code === 'es') return 'es';
  return 'en';
};

export const currentPhoneLanguage: AppLanguage = getDeviceLanguage();

const DICT: Record<AppLanguage, Record<string, string>> = {
  uk: {
    appName: 'YumMap',
    filtersTitle: 'Фільтри',
    placesTitle: 'Місця',
    modalTitle: 'Modal',
    heroSubtitle: 'Налаштуй і шукай',
    metersShort: 'м',
    language: 'Мова',
    languageUi: 'Мова інтерфейсу',
    languageApi: 'Language',
    languageSystem: 'Мова телефону',
    langUk: 'Українська',
    langEn: 'English',
    langDe: 'Німецька',
    useDeviceLanguage: 'До мови телефону',
    radiusLabel: 'Радіус (м)',
    maxLabel: 'Максимум',
    minRadiusHint: 'Мінімум 1000',
    maxResultsHint: 'Від 1 до 20 результатів',
    openNowLabel: 'Лише відкриті зараз',
    openNowHint: 'Увімкни, щоб бекенд повертав тільки заклади зі статусом «Відчинено».',
    includeTitle: 'Додати бажання',
    excludeTitle: 'Не хочу бачити',
    sortTitle: 'Сортування',
    sortPopularity: 'Популярність',
    sortDistance: 'Відстань',
    typeRestaurant: 'Ресторани',
    typeCoffeeShop: 'Кавʼярні',
    typePizza: 'Піцерії',
    typeFastFood: 'Фастфуд',
    typeBakery: 'Пекарні',
    typeSushi: 'Суші',
    typeBar: 'Бари',
    typeMuseum: 'Музеї',
    typePark: 'Парки',
    typeShoppingMall: 'Шопінг',
    add: 'Додати',
    searchBtn: 'Пошук поруч',
    invalidTypeTitle: 'Невірний тип',
    invalidTypeHint: 'Спробуй український синонім(одне слово) або англійською',
    noAddressTitle: 'Немає адреси',
    noAddressHint: 'Для цього місця немає достатньо даних, щоб відкрити карту.',
    openNow: 'Відчинено',
    closedNow: 'Зачинено',
    noPhoto: 'Фото відсутнє',
    ratingReviews: 'відгуків',
    hoursTitle: 'Графік роботи:',
    hoursModalTitle: 'Графік роботи',
    showAll: 'Показати всі',
    address: 'Адреса',
    phone: 'Телефон',
    officialSite: 'Офіційний сайт',
    aboutPlace: 'Про місце:',
    emptyTitle: 'Задайте дані у фільтрі',
    emptyText: 'Натисніть "Пошук поруч" у вкладці "Фільтри"',
    hintTitle: 'Підказка',
    hintText: 'При натисканні на місце вас буде перенаправлено за його адресою в Google Maps.',
    close: 'Закрити',
    mapHintClose: '✕',
    errorTitle: 'Помилка',
    gpsRequired: 'Потрібен доступ до GPS',
    loadFailed: 'Не вдалося завантажити дані.',
  },
  en: {
    appName: 'YumMap',
    filtersTitle: 'Filters',
    placesTitle: 'Places',
    modalTitle: 'Modal',
    heroSubtitle: 'Set up and search',
    metersShort: 'm',
    language: 'Language',
    languageUi: 'App language',
    languageApi: 'Language',
    languageSystem: 'Device language',
    langUk: 'Ukrainian',
    langEn: 'English',
    langDe: 'German',
    useDeviceLanguage: 'Use device language',
    radiusLabel: 'Radius (m)',
    maxLabel: 'Max',
    minRadiusHint: 'Minimum 1000',
    maxResultsHint: 'From 1 to 20 results',
    openNowLabel: 'Open now only',
    openNowHint: 'Enable to return only places that are currently open.',
    includeTitle: 'Include',
    excludeTitle: 'Exclude',
    sortTitle: 'Sorting',
    sortPopularity: 'Popularity',
    sortDistance: 'Distance',
    typeRestaurant: 'Restaurants',
    typeCoffeeShop: 'Coffee shops',
    typePizza: 'Pizzerias',
    typeFastFood: 'Fast food',
    typeBakery: 'Bakeries',
    typeSushi: 'Sushi',
    typeBar: 'Bars',
    typeMuseum: 'Museums',
    typePark: 'Parks',
    typeShoppingMall: 'Shopping',
    add: 'Add',
    searchBtn: 'Search nearby',
    invalidTypeTitle: 'Invalid type',
    invalidTypeHint: 'Try a Ukrainian synonym (one word) or English',
    noAddressTitle: 'No address',
    noAddressHint: 'Not enough data to open this place on the map.',
    openNow: 'Open',
    closedNow: 'Closed',
    noPhoto: 'No photo',
    ratingReviews: 'reviews',
    hoursTitle: 'Hours:',
    hoursModalTitle: 'Hours',
    showAll: 'Show all',
    address: 'Address',
    phone: 'Phone',
    officialSite: 'Official site',
    aboutPlace: 'About:',
    emptyTitle: 'Set filters first',
    emptyText: 'Tap "Search nearby" on the Filters tab',
    hintTitle: 'Hint',
    hintText: 'Tapping a place will open its address in Google Maps.',
    close: 'Close',
    mapHintClose: '✕',
    errorTitle: 'Error',
    gpsRequired: 'GPS access is required',
    loadFailed: 'Failed to load data.',
  },
  de: {
    appName: 'YumMap',
    filtersTitle: 'Filter',
    placesTitle: 'Orte',
    modalTitle: 'Modal',
    heroSubtitle: 'Einstellen und suchen',
    language: 'Sprache',
    languageUi: 'App-Sprache',
    languageApi: 'Sprache',
    languageSystem: 'Gerätesprache',
    langUk: 'Ukrainisch',
    langEn: 'Englisch',
    langDe: 'Deutsch',
    useDeviceLanguage: 'Zur Gerätesprache wechseln',
    radiusLabel: 'Radius (m)',
    maxLabel: 'Maximum',
    minRadiusHint: 'Minimum 1000',
    maxResultsHint: 'Von 1 bis 20 Ergebnissen',
    openNowLabel: 'Nur jetzt geöffnet',
    openNowHint: 'Aktivieren, um nur aktuell geöffnete Orte zu sehen.',
    includeTitle: 'Einschließen',
    excludeTitle: 'Ausschließen',
    sortTitle: 'Sortierung',
    sortPopularity: 'Beliebtheit',
    sortDistance: 'Entfernung',
    typeRestaurant: 'Restaurants',
    typeCoffeeShop: 'Cafés',
    typePizza: 'Pizzerien',
    typeFastFood: 'Fast Food',
    typeBakery: 'Bäckereien',
    typeSushi: 'Sushi',
    typeBar: 'Bars',
    typeMuseum: 'Museen',
    typePark: 'Parks',
    typeShoppingMall: 'Shopping',
    add: 'Hinzufügen',
    searchBtn: 'In der Nähe suchen',
    invalidTypeTitle: 'Ungültiger Typ',
    invalidTypeHint: 'Versuche ein ukrainisches Synonym (ein Wort) oder Englisch',
    noAddressTitle: 'Keine Adresse',
    noAddressHint: 'Nicht genügend Daten, um diesen Ort auf der Karte zu öffnen.',
    openNow: 'Geöffnet',
    closedNow: 'Geschlossen',
    noPhoto: 'Kein Foto',
    ratingReviews: 'Bewertungen',
    hoursTitle: 'Öffnungszeiten:',
    hoursModalTitle: 'Öffnungszeiten',
    showAll: 'Alle anzeigen',
    address: 'Adresse',
    phone: 'Telefon',
    officialSite: 'Offizielle Website',
    aboutPlace: 'Über:',
    emptyTitle: 'Zuerst Filter setzen',
    emptyText: 'Tippe auf „In der Nähe suchen“ im Tab „Filter“',
    hintTitle: 'Hinweis',
    hintText: 'Beim Tippen auf einen Ort öffnet sich seine Adresse in Google Maps.',
    close: 'Schließen',
    mapHintClose: '✕',
    errorTitle: 'Fehler',
    gpsRequired: 'GPS-Zugriff ist erforderlich',
    loadFailed: 'Daten konnten nicht geladen werden.',
    metersShort: 'm',
  },
  es: {
    appName: 'YumMap',
    filtersTitle: 'Filtros',
    placesTitle: 'Lugares',
    modalTitle: 'Modal',
    heroSubtitle: 'Configura y busca',
    metersShort: 'm',
    language: 'Idioma',
    languageUi: 'Idioma de la interfaz',
    languageApi: 'Idioma',
    languageSystem: 'Idioma del teléfono',
    langUk: 'Ucraniano',
    langEn: 'Inglés',
    langDe: 'Alemán',
    useDeviceLanguage: 'Usar idioma del teléfono',
    radiusLabel: 'Radio (m)',
    maxLabel: 'Máximo',
    minRadiusHint: 'Mínimo 1000',
    maxResultsHint: 'De 1 a 20 resultados',
    openNowLabel: 'Solo abiertos ahora',
    openNowHint: 'Activa para que el backend devuelva solo establecimientos con estado Abierto.',
    includeTitle: 'Agregar deseados',
    excludeTitle: 'No quiero ver',
    sortTitle: 'Ordenar',
    sortPopularity: 'Popularidad',
    sortDistance: 'Distancia',
    typeRestaurant: 'Restaurantes',
    typeCoffeeShop: 'Cafeterías',
    typePizza: 'Pizzerías',
    typeFastFood: 'Comida rápida',
    typeBakery: 'Panaderías',
    typeSushi: 'Sushi',
    typeBar: 'Bares',
    typeMuseum: 'Museos',
    typePark: 'Parques',
    typeShoppingMall: 'Centros comerciales',
    add: 'Agregar',
    searchBtn: 'Buscar cerca',
    invalidTypeTitle: 'Tipo inválido',
    invalidTypeHint: 'Prueba un sinónimo en ucraniano (una sola palabra) o en inglés',
    noAddressTitle: 'Sin dirección',
    noAddressHint: 'No hay datos suficientes de este lugar para abrir el mapa.',
    openNow: 'Abierto',
    closedNow: 'Cerrado',
    noPhoto: 'Sin foto',
    ratingReviews: 'reseñas',
    hoursTitle: 'Horario:',
    hoursModalTitle: 'Horario',
    showAll: 'Mostrar todo',
    address: 'Dirección',
    phone: 'Teléfono',
    officialSite: 'Sitio oficial',
    aboutPlace: 'Sobre el lugar:',
    emptyTitle: 'Configura un filtro',
    emptyText: 'Pulsa "Buscar cerca" en la pestaña "Filtros"',
    hintTitle: 'Consejo',
    hintText: 'Al tocar un lugar se abrirá su dirección en Google Maps.',
    close: 'Cerrar',
    mapHintClose: '',
    errorTitle: 'Error',
    gpsRequired: 'Se requiere acceso al GPS',
    loadFailed: 'No se pudo cargar la información.',
  }
};

export const t = (key: keyof typeof DICT.uk, lang: AppLanguage) =>
  DICT[lang]?.[key] ?? DICT.uk[key] ?? key;
